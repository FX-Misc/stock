class: center, middle
# 株価チャートのパターン判定

---

# 項目

1. 背景

2. 実現方法

3. コンテンツ

4. 今後の課題
---

# 背景

- 株マップにも既に形状判定のコンテンツは存在している。 参考:
[チャート形状検索](http://jp.kabumap.com/servlets/kabumap/Action?SRC=chartShape/base)

- 靭さんが見つけた他社サービス。[autochartist.com](http://www.autochartist.com/)
    - user kunihiro@qri.jp, pass: 1150
    - [一覧](http://fs14.qr.com/redmine/attachments/download/16525/chart1.png)

## kabumap版との主な違い
* 形状に対してトレンドラインがあるのでひと目で分かりやすい

* シグナルが生じた位置が厳密なためその後の価格の確率や予測価格などを算出している

* 形状が多い

* あとは色々

--

つまり

--
これくらいの作りたいよね！！
--
ということで始めました

---
# 実現方法

## 案１: 学習型
画像分析の手法を用いて正解となるデータを沢山用意して、SVM や　ニューラルネットを使って判別させようとした

結果
* そこそこ出来たかなぁと思って見せたらうーんという反応だった。。。ので諦めた

問題点
* パット見でどのチャートが正しい形なのかよく分からないのでちゃんと学習できるようなデータが少なかった。

* そもそもそれらの手法に精通していないのでチューニング等が上手くいかなかった

* トレンドラインは結局別ロジックでひかなければということなので今回の目的にはいまいちそぐわなかった

---
# 実現方法
## 案２: ピークボトムを繋ぐ
ピークボトムの割りと小さい期間（it's マジック）で計算し２つの点を総当り結ぶ。適当にフィルタリングした後、引かれた線の角度で形状を判定した

結果
* 見た目はそこそこ。
* トレンドラインのブレークする方向や箇所が取れるのでありがたい
* トレンドラインの角度を変えるだけで割りと対応できる

問題点
* 割りと説得力ありげだが結局価格情報はしっかり見ていないのでどこか人がみるのとは違う形状が検索される
* 角度で対応出来ない形状に対しては一つづつロジックを増やしていかないといけない。。。テクニカルを増やす要領
---
## 案3 チャートの転換点を見る
案3とほとんどおんなじだが、頂点の配置だけを見て形状を決める。ヘッドアンドショルダーで使用した。
ピークボトムは期間によって転換点が出にくい形状などが見受けられたのでチャートの転換点の判定にはzigzagを使用。

ヘッドアンドショルダーの転換点のイメージ
![イメージ](image.png)

---

# コンテンツ
* 各形状にトレンドラインをひいたものを表示するようにした。表示用のチャートはJSチャートを拡張

* 各形状においてブレークした終値から、1カ月後のリターンをとって勝率とした。]

* 平均上昇率をとって予測株価とした。

もっとやりたい
* 今形成まっただ中というのも拾いたかった

---
# 今後の課題
* 全ての形状を取れているのか？また判定した形状はあたっているのかというところの検証

* うーんイマイチ上手く判定できてなくない？という点の改善

* コンテンツとしての完成度を高めたい（まずはスマホ株マップにでもリリースしようかなぁっと思っています）


---
class: center, middle
#ご静聴ありがとうございました。